;; gorilla-repl.fileformat = 1

;; **
;;; #--------------------------------------
;;; # Joel Flow - Double Pendulum
;;; #--------------------------------------
;;; # Chaotic pendulum, with biased grammar
;; **

;; **
;;; Uses a grammar biased towards generating Lagrangians for simple physical systems.
;; **

;; @@
(ns flow.runs.doublependulum
  (:require [gorilla-plot.core :as plot]
            [algebolic.expression.core :as expression]
            [algebolic.expression.genetics :as genetics]
            [algebolic.expression.tree :as tree]
            [algebolic.expression.score :as score]
            [algebolic.expression.render :as render]
            [algebolic.expression.mma :as mma]
            [darwin.evolution.core :as evolution]
            [darwin.evolution.metrics :as metrics]
            [darwin.evolution.transform :as transform]
            [darwin.algorithms.spea2 :as spea2]
            [flow.lagrangian :as lagrangian]
            [flow.util :as util]
            [runs.config :as config]
            [runs.util :as rutil]
            [semantic-csv.core :as csv]
            [clojure.walk :as walk]))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-nil'>nil</span>","value":"nil"}
;; <=

;; **
;;; Load the data exported from Mathematica.
;; **

;; @@
(def data_theta1 (mapv #(vector (first %))
               (csv/slurp-csv "data/mma_double.csv"
                              :header false
                              :cast-fns {0 #(Double/parseDouble %) 1 #(Double/parseDouble %)})))
(def t-step 0.1)


(def data_omega1 (mapv #(vector (second %))
               (csv/slurp-csv "data/mma_double.csv"
                              :header false
                              :cast-fns {0 #(Double/parseDouble %) 1 #(Double/parseDouble %)}))) 
                       
(def dat (csv/slurp-csv "data/mma_double.csv"
                              :header false
                              :cast-fns {0 #(Double/parseDouble %) 1 #(Double/parseDouble %)}))
                       
                       
                       
(def t-step 0.1)


;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;flow.runs.doublependulum/t-step</span>","value":"#'flow.runs.doublependulum/t-step"}
;; <=

;; **
;;; **Theta**
;; **

;; @@
(plot/list-plot (mapv first data_theta1))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"11922094-964c-4a67-8d3e-4fe41cd4ccdd","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"11922094-964c-4a67-8d3e-4fe41cd4ccdd","field":"data.y"}}],"marks":[{"type":"symbol","from":{"data":"11922094-964c-4a67-8d3e-4fe41cd4ccdd"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}}],"data":[{"name":"11922094-964c-4a67-8d3e-4fe41cd4ccdd","values":[{"x":0,"y":1.0},{"x":1,"y":0.8989199993243598},{"x":2,"y":0.6012264322527066},{"x":3,"y":0.20728721591523996},{"x":4,"y":-0.12469131936494138},{"x":5,"y":-0.3203010307328177},{"x":6,"y":-0.31739157814328817},{"x":7,"y":-0.15150573303836484},{"x":8,"y":-0.06853590752776278},{"x":9,"y":-0.10208675189016087},{"x":10,"y":-0.19283938714614973},{"x":11,"y":-0.3041667425077898},{"x":12,"y":-0.42784503777028354},{"x":13,"y":-0.5637214990503191},{"x":14,"y":-0.6436598262165486},{"x":15,"y":-0.556461294499259},{"x":16,"y":-0.2826385812681396},{"x":17,"y":0.11807334789353377},{"x":18,"y":0.4857189638152173},{"x":19,"y":0.6913021306892096},{"x":20,"y":0.7055517780524226},{"x":21,"y":0.5722506308257261},{"x":22,"y":0.4000601259592323},{"x":23,"y":0.23736876923428954},{"x":24,"y":0.09480122223273243},{"x":25,"y":0.002793018560010379},{"x":26,"y":0.020435421146520638},{"x":27,"y":0.18915121210814076},{"x":28,"y":0.29559964634164904},{"x":29,"y":0.19155971053107798},{"x":30,"y":-0.0645389453160641},{"x":31,"y":-0.41199979729428904},{"x":32,"y":-0.763745857310267},{"x":33,"y":-0.9658147523027288},{"x":34,"y":-0.9654151842309668},{"x":35,"y":-0.7619189567478477},{"x":36,"y":-0.3814639881360723},{"x":37,"y":0.019681487608635063},{"x":38,"y":0.30436890958202917},{"x":39,"y":0.4084348587488139},{"x":40,"y":0.3033511287685211},{"x":41,"y":0.16377080098790794},{"x":42,"y":0.13211037924768504},{"x":43,"y":0.1669624228955047},{"x":44,"y":0.22685663153362629},{"x":45,"y":0.29920237325085636},{"x":46,"y":0.3977196592588333},{"x":47,"y":0.5249176269470148},{"x":48,"y":0.5665113600861779},{"x":49,"y":0.4151813933396576},{"x":50,"y":0.08338014259205495},{"x":51,"y":-0.33945776612654516},{"x":52,"y":-0.6729538983437577},{"x":53,"y":-0.8190943458030526},{"x":54,"y":-0.7667122609067734},{"x":55,"y":-0.56613996650745},{"x":56,"y":-0.3329280745275617},{"x":57,"y":-0.12105327215003012},{"x":58,"y":0.04288629562864375},{"x":59,"y":0.10675009790370402},{"x":60,"y":-0.0012246218471329813},{"x":61,"y":-0.19771048010865605},{"x":62,"y":-0.20836327111761377},{"x":63,"y":-0.0473430071408562},{"x":64,"y":0.21536863452407284},{"x":65,"y":0.5318501320376852},{"x":66,"y":0.8203389351107336},{"x":67,"y":0.945085561544485},{"x":68,"y":0.8656880388502126},{"x":69,"y":0.5839868233179135},{"x":70,"y":0.15939401082395943},{"x":71,"y":-0.22285894688591146},{"x":72,"y":-0.44779233210495223},{"x":73,"y":-0.4661579631173108},{"x":74,"y":-0.32575683393984084},{"x":75,"y":-0.22180368665005942},{"x":76,"y":-0.18818819244095603},{"x":77,"y":-0.18576678271842334},{"x":78,"y":-0.1968715179619533},{"x":79,"y":-0.23362802935287189},{"x":80,"y":-0.33158415336253816},{"x":81,"y":-0.4725833079380909},{"x":82,"y":-0.47279998117485894},{"x":83,"y":-0.26485131605566004},{"x":84,"y":0.10776493903368044},{"x":85,"y":0.5367584498139469},{"x":86,"y":0.8344521790576684},{"x":87,"y":0.9313115251190204},{"x":88,"y":0.8240013888669246},{"x":89,"y":0.5514799939720119},{"x":90,"y":0.24539114522050504},{"x":91,"y":-0.014205895564683798},{"x":92,"y":-0.18284774301861834},{"x":93,"y":-0.19271063152967646},{"x":94,"y":-0.006238381238316786},{"x":95,"y":0.12534591122174707},{"x":96,"y":0.07394787024428637},{"x":97,"y":-0.09041820089881154},{"x":98,"y":-0.31111406108502415},{"x":99,"y":-0.5577880624881791},{"x":100,"y":-0.7747457021632537}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"11922094-964c-4a67-8d3e-4fe41cd4ccdd\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"11922094-964c-4a67-8d3e-4fe41cd4ccdd\", :field \"data.y\"}}], :marks [{:type \"symbol\", :from {:data \"11922094-964c-4a67-8d3e-4fe41cd4ccdd\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}}], :data [{:name \"11922094-964c-4a67-8d3e-4fe41cd4ccdd\", :values ({:x 0, :y 1.0} {:x 1, :y 0.8989199993243598} {:x 2, :y 0.6012264322527066} {:x 3, :y 0.20728721591523996} {:x 4, :y -0.12469131936494138} {:x 5, :y -0.3203010307328177} {:x 6, :y -0.31739157814328817} {:x 7, :y -0.15150573303836484} {:x 8, :y -0.06853590752776278} {:x 9, :y -0.10208675189016087} {:x 10, :y -0.19283938714614973} {:x 11, :y -0.3041667425077898} {:x 12, :y -0.42784503777028354} {:x 13, :y -0.5637214990503191} {:x 14, :y -0.6436598262165486} {:x 15, :y -0.556461294499259} {:x 16, :y -0.2826385812681396} {:x 17, :y 0.11807334789353377} {:x 18, :y 0.4857189638152173} {:x 19, :y 0.6913021306892096} {:x 20, :y 0.7055517780524226} {:x 21, :y 0.5722506308257261} {:x 22, :y 0.4000601259592323} {:x 23, :y 0.23736876923428954} {:x 24, :y 0.09480122223273243} {:x 25, :y 0.002793018560010379} {:x 26, :y 0.020435421146520638} {:x 27, :y 0.18915121210814076} {:x 28, :y 0.29559964634164904} {:x 29, :y 0.19155971053107798} {:x 30, :y -0.0645389453160641} {:x 31, :y -0.41199979729428904} {:x 32, :y -0.763745857310267} {:x 33, :y -0.9658147523027288} {:x 34, :y -0.9654151842309668} {:x 35, :y -0.7619189567478477} {:x 36, :y -0.3814639881360723} {:x 37, :y 0.019681487608635063} {:x 38, :y 0.30436890958202917} {:x 39, :y 0.4084348587488139} {:x 40, :y 0.3033511287685211} {:x 41, :y 0.16377080098790794} {:x 42, :y 0.13211037924768504} {:x 43, :y 0.1669624228955047} {:x 44, :y 0.22685663153362629} {:x 45, :y 0.29920237325085636} {:x 46, :y 0.3977196592588333} {:x 47, :y 0.5249176269470148} {:x 48, :y 0.5665113600861779} {:x 49, :y 0.4151813933396576} {:x 50, :y 0.08338014259205495} {:x 51, :y -0.33945776612654516} {:x 52, :y -0.6729538983437577} {:x 53, :y -0.8190943458030526} {:x 54, :y -0.7667122609067734} {:x 55, :y -0.56613996650745} {:x 56, :y -0.3329280745275617} {:x 57, :y -0.12105327215003012} {:x 58, :y 0.04288629562864375} {:x 59, :y 0.10675009790370402} {:x 60, :y -0.0012246218471329813} {:x 61, :y -0.19771048010865605} {:x 62, :y -0.20836327111761377} {:x 63, :y -0.0473430071408562} {:x 64, :y 0.21536863452407284} {:x 65, :y 0.5318501320376852} {:x 66, :y 0.8203389351107336} {:x 67, :y 0.945085561544485} {:x 68, :y 0.8656880388502126} {:x 69, :y 0.5839868233179135} {:x 70, :y 0.15939401082395943} {:x 71, :y -0.22285894688591146} {:x 72, :y -0.44779233210495223} {:x 73, :y -0.4661579631173108} {:x 74, :y -0.32575683393984084} {:x 75, :y -0.22180368665005942} {:x 76, :y -0.18818819244095603} {:x 77, :y -0.18576678271842334} {:x 78, :y -0.1968715179619533} {:x 79, :y -0.23362802935287189} {:x 80, :y -0.33158415336253816} {:x 81, :y -0.4725833079380909} {:x 82, :y -0.47279998117485894} {:x 83, :y -0.26485131605566004} {:x 84, :y 0.10776493903368044} {:x 85, :y 0.5367584498139469} {:x 86, :y 0.8344521790576684} {:x 87, :y 0.9313115251190204} {:x 88, :y 0.8240013888669246} {:x 89, :y 0.5514799939720119} {:x 90, :y 0.24539114522050504} {:x 91, :y -0.014205895564683798} {:x 92, :y -0.18284774301861834} {:x 93, :y -0.19271063152967646} {:x 94, :y -0.006238381238316786} {:x 95, :y 0.12534591122174707} {:x 96, :y 0.07394787024428637} {:x 97, :y -0.09041820089881154} {:x 98, :y -0.31111406108502415} {:x 99, :y -0.5577880624881791} {:x 100, :y -0.7747457021632537})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; **Omega**
;; **

;; @@
(plot/list-plot (mapv first data_omega1))
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"5a5bdf55-7315-4862-913a-9733f18f6c43","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"5a5bdf55-7315-4862-913a-9733f18f6c43","field":"data.y"}}],"marks":[{"type":"symbol","from":{"data":"5a5bdf55-7315-4862-913a-9733f18f6c43"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"steelblue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}}],"data":[{"name":"5a5bdf55-7315-4862-913a-9733f18f6c43","values":[{"x":0,"y":0.5},{"x":1,"y":0.5273773323698951},{"x":2,"y":0.6150146061532324},{"x":3,"y":0.6867637450857415},{"x":4,"y":0.6128755226651414},{"x":5,"y":0.3759753033776718},{"x":6,"y":-0.00891222272756455},{"x":7,"y":-0.4859843812105411},{"x":8,"y":-0.8596378945099428},{"x":9,"y":-1.0880175001724761},{"x":10,"y":-1.1855488923462065},{"x":11,"y":-1.1575073908741338},{"x":12,"y":-1.0063385347323577},{"x":13,"y":-0.7409760400090484},{"x":14,"y":-0.42663491254056624},{"x":15,"y":-0.16332995583459806},{"x":16,"y":0.00313006770448885},{"x":17,"y":0.07657583412271292},{"x":18,"y":0.1636055429524412},{"x":19,"y":0.3409737545282742},{"x":20,"y":0.5938523347108549},{"x":21,"y":0.8689500002921885},{"x":22,"y":1.0703696819982962},{"x":23,"y":1.1499902909294584},{"x":24,"y":1.09921817125142},{"x":25,"y":0.9148241706177372},{"x":26,"y":0.5887099607550005},{"x":27,"y":0.11546087486737448},{"x":28,"y":-0.3352012939175865},{"x":29,"y":-0.6374287103167247},{"x":30,"y":-0.7847775717140719},{"x":31,"y":-0.7671413329890023},{"x":32,"y":-0.637892645069462},{"x":33,"y":-0.5291651228069204},{"x":34,"y":-0.4769995584447674},{"x":35,"y":-0.48575035287369117},{"x":36,"y":-0.5532310885650046},{"x":37,"y":-0.5531692758934087},{"x":38,"y":-0.3912589310921021},{"x":39,"y":-0.0779292378679363},{"x":40,"y":0.3606477936759421},{"x":41,"y":0.7774445959489588},{"x":42,"y":1.052618500116024},{"x":43,"y":1.1955554771672163},{"x":44,"y":1.2153438737438662},{"x":45,"y":1.1141115554095216},{"x":46,"y":0.8889440285610497},{"x":47,"y":0.5513810440539018},{"x":48,"y":0.20244026369872878},{"x":49,"y":-0.05681057672314274},{"x":50,"y":-0.19160561660471556},{"x":51,"y":-0.2285229711276155},{"x":52,"y":-0.2989790415121534},{"x":53,"y":-0.45480098142639636},{"x":54,"y":-0.6749425063827657},{"x":55,"y":-0.9094739078608727},{"x":56,"y":-1.0575241567889448},{"x":57,"y":-1.0698642995934966},{"x":58,"y":-0.9397360032321105},{"x":59,"y":-0.6674124464434056},{"x":60,"y":-0.2399759747967363},{"x":61,"y":0.2667689694170905},{"x":62,"y":0.6400580579094078},{"x":63,"y":0.8623641661791187},{"x":64,"y":0.9296901822527296},{"x":65,"y":0.8414607796897818},{"x":66,"y":0.6619901861846117},{"x":67,"y":0.5084990646688763},{"x":68,"y":0.4130530475111119},{"x":69,"y":0.3918159994019021},{"x":70,"y":0.4201765296637072},{"x":71,"y":0.3507218638943464},{"x":72,"y":0.12668887943057722},{"x":73,"y":-0.2295676834221329},{"x":74,"y":-0.65183281816219},{"x":75,"y":-0.9792526718782775},{"x":76,"y":-1.1714530923300341},{"x":77,"y":-1.2398543020068622},{"x":78,"y":-1.188508569195829},{"x":79,"y":-1.0145663696594325},{"x":80,"y":-0.7077893015816162},{"x":81,"y":-0.29694687500599043},{"x":82,"y":0.06550229656748253},{"x":83,"y":0.301772028672801},{"x":84,"y":0.3872985570654786},{"x":85,"y":0.36943128095627253},{"x":86,"y":0.39598336347445034},{"x":87,"y":0.49961026012135046},{"x":88,"y":0.6624847467718888},{"x":89,"y":0.8519426659243755},{"x":90,"y":0.9543707079885553},{"x":91,"y":0.9045250714705957},{"x":92,"y":0.7006813353503054},{"x":93,"y":0.34712433586419034},{"x":94,"y":-0.1521973416376246},{"x":95,"y":-0.6015989351938787},{"x":96,"y":-0.8940901509067573},{"x":97,"y":-1.0427348850024962},{"x":98,"y":-1.0464947142202496},{"x":99,"y":-0.9108663835615147},{"x":100,"y":-0.6852351460783989}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"5a5bdf55-7315-4862-913a-9733f18f6c43\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"5a5bdf55-7315-4862-913a-9733f18f6c43\", :field \"data.y\"}}], :marks [{:type \"symbol\", :from {:data \"5a5bdf55-7315-4862-913a-9733f18f6c43\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"steelblue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}}], :data [{:name \"5a5bdf55-7315-4862-913a-9733f18f6c43\", :values ({:x 0, :y 0.5} {:x 1, :y 0.5273773323698951} {:x 2, :y 0.6150146061532324} {:x 3, :y 0.6867637450857415} {:x 4, :y 0.6128755226651414} {:x 5, :y 0.3759753033776718} {:x 6, :y -0.00891222272756455} {:x 7, :y -0.4859843812105411} {:x 8, :y -0.8596378945099428} {:x 9, :y -1.0880175001724761} {:x 10, :y -1.1855488923462065} {:x 11, :y -1.1575073908741338} {:x 12, :y -1.0063385347323577} {:x 13, :y -0.7409760400090484} {:x 14, :y -0.42663491254056624} {:x 15, :y -0.16332995583459806} {:x 16, :y 0.00313006770448885} {:x 17, :y 0.07657583412271292} {:x 18, :y 0.1636055429524412} {:x 19, :y 0.3409737545282742} {:x 20, :y 0.5938523347108549} {:x 21, :y 0.8689500002921885} {:x 22, :y 1.0703696819982962} {:x 23, :y 1.1499902909294584} {:x 24, :y 1.09921817125142} {:x 25, :y 0.9148241706177372} {:x 26, :y 0.5887099607550005} {:x 27, :y 0.11546087486737448} {:x 28, :y -0.3352012939175865} {:x 29, :y -0.6374287103167247} {:x 30, :y -0.7847775717140719} {:x 31, :y -0.7671413329890023} {:x 32, :y -0.637892645069462} {:x 33, :y -0.5291651228069204} {:x 34, :y -0.4769995584447674} {:x 35, :y -0.48575035287369117} {:x 36, :y -0.5532310885650046} {:x 37, :y -0.5531692758934087} {:x 38, :y -0.3912589310921021} {:x 39, :y -0.0779292378679363} {:x 40, :y 0.3606477936759421} {:x 41, :y 0.7774445959489588} {:x 42, :y 1.052618500116024} {:x 43, :y 1.1955554771672163} {:x 44, :y 1.2153438737438662} {:x 45, :y 1.1141115554095216} {:x 46, :y 0.8889440285610497} {:x 47, :y 0.5513810440539018} {:x 48, :y 0.20244026369872878} {:x 49, :y -0.05681057672314274} {:x 50, :y -0.19160561660471556} {:x 51, :y -0.2285229711276155} {:x 52, :y -0.2989790415121534} {:x 53, :y -0.45480098142639636} {:x 54, :y -0.6749425063827657} {:x 55, :y -0.9094739078608727} {:x 56, :y -1.0575241567889448} {:x 57, :y -1.0698642995934966} {:x 58, :y -0.9397360032321105} {:x 59, :y -0.6674124464434056} {:x 60, :y -0.2399759747967363} {:x 61, :y 0.2667689694170905} {:x 62, :y 0.6400580579094078} {:x 63, :y 0.8623641661791187} {:x 64, :y 0.9296901822527296} {:x 65, :y 0.8414607796897818} {:x 66, :y 0.6619901861846117} {:x 67, :y 0.5084990646688763} {:x 68, :y 0.4130530475111119} {:x 69, :y 0.3918159994019021} {:x 70, :y 0.4201765296637072} {:x 71, :y 0.3507218638943464} {:x 72, :y 0.12668887943057722} {:x 73, :y -0.2295676834221329} {:x 74, :y -0.65183281816219} {:x 75, :y -0.9792526718782775} {:x 76, :y -1.1714530923300341} {:x 77, :y -1.2398543020068622} {:x 78, :y -1.188508569195829} {:x 79, :y -1.0145663696594325} {:x 80, :y -0.7077893015816162} {:x 81, :y -0.29694687500599043} {:x 82, :y 0.06550229656748253} {:x 83, :y 0.301772028672801} {:x 84, :y 0.3872985570654786} {:x 85, :y 0.36943128095627253} {:x 86, :y 0.39598336347445034} {:x 87, :y 0.49961026012135046} {:x 88, :y 0.6624847467718888} {:x 89, :y 0.8519426659243755} {:x 90, :y 0.9543707079885553} {:x 91, :y 0.9045250714705957} {:x 92, :y 0.7006813353503054} {:x 93, :y 0.34712433586419034} {:x 94, :y -0.1521973416376246} {:x 95, :y -0.6015989351938787} {:x 96, :y -0.8940901509067573} {:x 97, :y -1.0427348850024962} {:x 98, :y -1.0464947142202496} {:x 99, :y -0.9108663835615147} {:x 100, :y -0.6852351460783989})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; As well as the variables themselves, sines, cosines and squares of the variables are used as terminal nodes of the expression trees. The branch nodes are arithmetic operators.
;; **

;; @@
(def vars '[theta1 omega1 theta2 omega2 cos-omega1 sin-omega1 cos-theta1 sin-theta1 theta1-sq omega1-sq cos-omega2 sin-omega2 cos-theta2 sin-theta2 theta2-sq omega2-sq])

(count vars)

(def functions (expression/get-functions #{:plus :minus :times}))

(def terminals (expression/terminal-generators vars))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;flow.runs.doublependulum/terminals</span>","value":"#'flow.runs.doublependulum/terminals"}
;; <=

;; **
;;; This function transforms expressions in our biased grammar into canonical algebolic expressions.
;; **

;; @@
(defn grammar-replace
  [expr]
  (walk/postwalk-replace
    {'sin-theta1 '[:sin theta1]
     'cos-theta1 '[:cos theta1]
     'sin-omega1 '[:sin omega1]
     'cos-omega1 '[:cos omega1]
     'theta1-sq '[:times theta1 theta1]
     'omega1-sq '[:times omega1 omega1]
     'theta1-cube '[:times [:times theta1 theta1] theta1]
     'omega1-cube '[:times [:times omega1 omega1] omega1]
     'theta1-four '[:times [:times theta1 theta1] [:times theta1 theta1]]
     'omega1-four '[:times [:times omega1 omega1] [:times omega1 omega1]]
     'sin-theta2 '[:sin theta2]
     'cos-theta2 '[:cos theta2]
     'sin-omega2 '[:sin omega2]
     'cos-omega2 '[:cos omega2]
     'theta2-sq '[:times theta2 theta2]
     'omega2-sq '[:times omega2 omega2]
     'theta2-cube '[:times [:times theta2 theta2] theta2]
     'omega2-cube '[:times [:times omega2 omega2] omega2]
     'theta2-four '[:times [:times theta2 theta2] [:times theta2 theta2]]
     'omega2-four '[:times [:times omega2 omega2] [:times omega2 omega2]]
     } expr))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;flow.runs.doublependulum/grammar-replace</span>","value":"#'flow.runs.doublependulum/grammar-replace"}
;; <=

;; **
;;; Configure the evolutionary algorithm. See the darwin code for details.
;; **

;; @@
(def generation-config
  (let [size-limit 50
        ;;min-size 1
        ea-config (spea2/spea2-config
                    {:goals [:error :complexity]
                     :archive-size 50
                     :comparison-depth 3
                     :deduplicate true
                     :binary-ops [{:op (partial genetics/ninety-ten-sl-crossover size-limit) :repeat 45}]
                     :unary-ops [{:op (partial genetics/random-tree-mutation functions terminals 5) :repeat 10}]})
        score-functions {:complexity (fn [x] (+ (* 0.0 (tree/depth x)) (* 1.0 (tree/count-nodes x))))
                         :error      (fn [e] (lagrangian/lagrange-score-mmd
                                               (lagrangian/prepare-lagrange-mmd-data dat t-step '[theta1 theta2])
                                               t-step '[theta1 theta2] '[omega1 omega2] (grammar-replace e)))}]
    {:ea-config          ea-config
     :transformations    [(partial transform/apply-to-fraction-of-genotypes
                                   (partial transform/hill-descent
                                            genetics/twiddle-constants
                                            (:error score-functions))
                                   0.20)
                          (partial transform/apply-to-all-genotypes
                                   (partial genetics/trim-hard size-limit))
                          #_(partial transform/apply-to-all-genotypes
                                     (partial genetics/boost-hard min-size
                                              #(genetics/random-full-tree functions terminals 3)))]
     :score-functions    score-functions
     :reporting-function (fn [z] (print ".") (flush))}))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;flow.runs.doublependulum/generation-config</span>","value":"#'flow.runs.doublependulum/generation-config"}
;; <=

;; **
;;; Create an initial population and evolve for a number of generations.
;; **

;; @@
(def initial-zeitgeist (evolution/make-zeitgeist (genetics/full-population functions terminals 100 7)))

; A quick look at the first population 

(mma/fullform (grammar-replace (:genotype (first (initial-zeitgeist :rabble)))))
;; @@
;; =>
;;; {"type":"html","content":"<span class='clj-string'>&quot;Subtract[Plus[Plus[Plus[Times[Subtract[Cos[theta1], omega1], Plus[Sin[theta2], Sin[theta1]]], Subtract[Plus[Sin[theta2], Sin[theta2]], Subtract[Times[omega1, omega1], theta1]]], Times[Subtract[Times[Cos[theta1], Times[omega1, omega1]], Times[Times[omega1, omega1], Times[theta2, theta2]]], Times[Subtract[Times[omega1, omega1], Sin[omega1]], Times[Cos[omega1], Times[theta1, theta1]]]]], Subtract[Times[Subtract[Plus[Sin[omega2], Times[omega2, omega2]], Times[Times[omega2, omega2], Times[omega1, omega1]]], Times[Times[theta1, Times[theta1, theta1]], Times[Sin[theta1], Sin[theta1]]]], Plus[Times[Plus[Cos[theta2], Times[theta1, theta1]], Subtract[Sin[theta2], omega1]], Plus[Plus[1.1533694888770902, 0.32230622308410983], Plus[theta2, theta2]]]]], Subtract[Subtract[Times[Subtract[Subtract[Times[theta2, theta2], Sin[omega2]], Subtract[omega1, theta1]], Plus[Subtract[Cos[theta1], Sin[omega1]], Subtract[theta1, theta2]]], Plus[Subtract[Subtract[Times[theta1, theta1], omega2], Subtract[Sin[theta2], 0.07302194515166605]], Plus[Subtract[Sin[theta1], Times[omega2, omega2]], Plus[Sin[theta1], Times[omega1, omega1]]]]], Subtract[Subtract[Plus[Times[Cos[omega1], Sin[theta1]], Subtract[0.35293407421725553, Sin[omega2]]], Plus[Subtract[Cos[omega1], Sin[omega1]], Subtract[Sin[theta2], Times[omega1, omega1]]]], Subtract[Plus[Plus[Cos[omega2], omega1], Subtract[theta2, Sin[theta1]]], Plus[Times[Sin[theta1], Times[omega2, omega2]], Times[theta2, Cos[theta2]]]]]]]&quot;</span>","value":"\"Subtract[Plus[Plus[Plus[Times[Subtract[Cos[theta1], omega1], Plus[Sin[theta2], Sin[theta1]]], Subtract[Plus[Sin[theta2], Sin[theta2]], Subtract[Times[omega1, omega1], theta1]]], Times[Subtract[Times[Cos[theta1], Times[omega1, omega1]], Times[Times[omega1, omega1], Times[theta2, theta2]]], Times[Subtract[Times[omega1, omega1], Sin[omega1]], Times[Cos[omega1], Times[theta1, theta1]]]]], Subtract[Times[Subtract[Plus[Sin[omega2], Times[omega2, omega2]], Times[Times[omega2, omega2], Times[omega1, omega1]]], Times[Times[theta1, Times[theta1, theta1]], Times[Sin[theta1], Sin[theta1]]]], Plus[Times[Plus[Cos[theta2], Times[theta1, theta1]], Subtract[Sin[theta2], omega1]], Plus[Plus[1.1533694888770902, 0.32230622308410983], Plus[theta2, theta2]]]]], Subtract[Subtract[Times[Subtract[Subtract[Times[theta2, theta2], Sin[omega2]], Subtract[omega1, theta1]], Plus[Subtract[Cos[theta1], Sin[omega1]], Subtract[theta1, theta2]]], Plus[Subtract[Subtract[Times[theta1, theta1], omega2], Subtract[Sin[theta2], 0.07302194515166605]], Plus[Subtract[Sin[theta1], Times[omega2, omega2]], Plus[Sin[theta1], Times[omega1, omega1]]]]], Subtract[Subtract[Plus[Times[Cos[omega1], Sin[theta1]], Subtract[0.35293407421725553, Sin[omega2]]], Plus[Subtract[Cos[omega1], Sin[omega1]], Subtract[Sin[theta2], Times[omega1, omega1]]]], Subtract[Plus[Plus[Cos[omega2], omega1], Subtract[theta2, Sin[theta1]]], Plus[Times[Sin[theta1], Times[omega2, omega2]], Times[theta2, Cos[theta2]]]]]]]\""}
;; <=

;; @@
(time (def result (evolution/run-evolution
                    generation-config
                    initial-zeitgeist
                    (fn [zg gc] (>= (:age zg) 100)))))
;; @@
;; ->
;;; ....................................................................................................&quot;Elapsed time: 34883.22319 msecs&quot;
;;; 
;; <-
;; =>
;;; {"type":"html","content":"<span class='clj-var'>#&#x27;flow.runs.doublependulum/result</span>","value":"#'flow.runs.doublependulum/result"}
;; <=

;; **
;;; Look at the best error as a function of generation number.
;; **

;; @@
(plot/list-plot (:min (:error @metrics/metrics)) :joined true)
;; @@
;; =>
;;; {"type":"vega","content":{"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"db481c67-e385-43e5-8d14-2e6d726eb653","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"db481c67-e385-43e5-8d14-2e6d726eb653","field":"data.y"}}],"marks":[{"type":"line","from":{"data":"db481c67-e385-43e5-8d14-2e6d726eb653"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"stroke":{"value":"#FF29D2"},"strokeWidth":{"value":2},"strokeOpacity":{"value":1}}}}],"data":[{"name":"db481c67-e385-43e5-8d14-2e6d726eb653","values":[{"x":0,"y":3.5164254511144044},{"x":1,"y":3.5164254511144044},{"x":2,"y":2.9600123244083183},{"x":3,"y":2.9600123244083183},{"x":4,"y":1.556612623408506},{"x":5,"y":0.9100176797852646},{"x":6,"y":-0.8933415011034755},{"x":7,"y":-1.7295970226694588},{"x":8,"y":-2.3221362395619174},{"x":9,"y":-3.2824597459650566},{"x":10,"y":-3.9121315806153625},{"x":11,"y":-5.444961629114114},{"x":12,"y":-5.444961629114114},{"x":13,"y":-5.444961629114114},{"x":14,"y":-5.490262827638175},{"x":15,"y":-5.692311991340994},{"x":16,"y":-5.849172020518447},{"x":17,"y":-6.95321966452986},{"x":18,"y":-6.95321966452986},{"x":19,"y":-6.95321966452986},{"x":20,"y":-7.845564516052308},{"x":21,"y":-7.845564516052308},{"x":22,"y":-7.845564516052308},{"x":23,"y":-8.739498420440006},{"x":24,"y":-9.568624032107826},{"x":25,"y":-11.080698220327905},{"x":26,"y":-11.295989733893247},{"x":27,"y":-12.038866596518965},{"x":28,"y":-12.038866596518965},{"x":29,"y":-12.480799645215756},{"x":30,"y":-12.480799645215756},{"x":31,"y":-13.700420454022725},{"x":32,"y":-13.700420454022725},{"x":33,"y":-13.700420454022725},{"x":34,"y":-13.700420454022725},{"x":35,"y":-15.723428218086392},{"x":36,"y":-15.723428218086392},{"x":37,"y":-15.723428218086392},{"x":38,"y":-15.907609306416278},{"x":39,"y":-16.196382646071942},{"x":40,"y":-16.196382646071942},{"x":41,"y":-16.196382646071942},{"x":42,"y":-16.22525918888133},{"x":43,"y":-16.22525918888133},{"x":44,"y":-16.22525918888133},{"x":45,"y":-16.51879130371557},{"x":46,"y":-16.7572355390353},{"x":47,"y":-16.7572355390353},{"x":48,"y":-16.7572355390353},{"x":49,"y":-16.833865059765778},{"x":50,"y":-16.889075848694397},{"x":51,"y":-16.889075848694397},{"x":52,"y":-16.889075848694397},{"x":53,"y":-16.889075848694397},{"x":54,"y":-16.889075848694397},{"x":55,"y":-16.889075848694397},{"x":56,"y":-16.937250856215442},{"x":57,"y":-16.937250856215442},{"x":58,"y":-16.937250856215442},{"x":59,"y":-16.94372579065236},{"x":60,"y":-16.94372579065236},{"x":61,"y":-16.94372579065236},{"x":62,"y":-16.94372579065236},{"x":63,"y":-16.94372579065236},{"x":64,"y":-16.953336173745946},{"x":65,"y":-16.953336173745946},{"x":66,"y":-16.953336173745946},{"x":67,"y":-16.953336173745946},{"x":68,"y":-16.953336173745946},{"x":69,"y":-16.953336173745946},{"x":70,"y":-16.953336173745946},{"x":71,"y":-16.953336173745946},{"x":72,"y":-16.953336173745946},{"x":73,"y":-16.953336173745946},{"x":74,"y":-16.978477485827618},{"x":75,"y":-16.978477485827618},{"x":76,"y":-16.978477485827618},{"x":77,"y":-16.978477485827618},{"x":78,"y":-16.978477485827618},{"x":79,"y":-16.978477485827618},{"x":80,"y":-17.174870419942696},{"x":81,"y":-17.174870419942696},{"x":82,"y":-17.349291310905457},{"x":83,"y":-17.349291310905457},{"x":84,"y":-17.349291310905457},{"x":85,"y":-17.349291310905457},{"x":86,"y":-17.349291310905457},{"x":87,"y":-17.349291310905457},{"x":88,"y":-17.349291310905457},{"x":89,"y":-17.349291310905457},{"x":90,"y":-17.349291310905457},{"x":91,"y":-17.349291310905457},{"x":92,"y":-17.349291310905457},{"x":93,"y":-17.349291310905457},{"x":94,"y":-17.349291310905457},{"x":95,"y":-17.349291310905457},{"x":96,"y":-17.349291310905457},{"x":97,"y":-17.349291310905457},{"x":98,"y":-17.349291310905457},{"x":99,"y":-17.349291310905457}]}],"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50}},"value":"#gorilla_repl.vega.VegaView{:content {:axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"db481c67-e385-43e5-8d14-2e6d726eb653\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"db481c67-e385-43e5-8d14-2e6d726eb653\", :field \"data.y\"}}], :marks [{:type \"line\", :from {:data \"db481c67-e385-43e5-8d14-2e6d726eb653\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :stroke {:value \"#FF29D2\"}, :strokeWidth {:value 2}, :strokeOpacity {:value 1}}}}], :data [{:name \"db481c67-e385-43e5-8d14-2e6d726eb653\", :values ({:x 0, :y 3.5164254511144044} {:x 1, :y 3.5164254511144044} {:x 2, :y 2.9600123244083183} {:x 3, :y 2.9600123244083183} {:x 4, :y 1.556612623408506} {:x 5, :y 0.9100176797852646} {:x 6, :y -0.8933415011034755} {:x 7, :y -1.7295970226694588} {:x 8, :y -2.3221362395619174} {:x 9, :y -3.2824597459650566} {:x 10, :y -3.9121315806153625} {:x 11, :y -5.444961629114114} {:x 12, :y -5.444961629114114} {:x 13, :y -5.444961629114114} {:x 14, :y -5.490262827638175} {:x 15, :y -5.692311991340994} {:x 16, :y -5.849172020518447} {:x 17, :y -6.95321966452986} {:x 18, :y -6.95321966452986} {:x 19, :y -6.95321966452986} {:x 20, :y -7.845564516052308} {:x 21, :y -7.845564516052308} {:x 22, :y -7.845564516052308} {:x 23, :y -8.739498420440006} {:x 24, :y -9.568624032107826} {:x 25, :y -11.080698220327905} {:x 26, :y -11.295989733893247} {:x 27, :y -12.038866596518965} {:x 28, :y -12.038866596518965} {:x 29, :y -12.480799645215756} {:x 30, :y -12.480799645215756} {:x 31, :y -13.700420454022725} {:x 32, :y -13.700420454022725} {:x 33, :y -13.700420454022725} {:x 34, :y -13.700420454022725} {:x 35, :y -15.723428218086392} {:x 36, :y -15.723428218086392} {:x 37, :y -15.723428218086392} {:x 38, :y -15.907609306416278} {:x 39, :y -16.196382646071942} {:x 40, :y -16.196382646071942} {:x 41, :y -16.196382646071942} {:x 42, :y -16.22525918888133} {:x 43, :y -16.22525918888133} {:x 44, :y -16.22525918888133} {:x 45, :y -16.51879130371557} {:x 46, :y -16.7572355390353} {:x 47, :y -16.7572355390353} {:x 48, :y -16.7572355390353} {:x 49, :y -16.833865059765778} {:x 50, :y -16.889075848694397} {:x 51, :y -16.889075848694397} {:x 52, :y -16.889075848694397} {:x 53, :y -16.889075848694397} {:x 54, :y -16.889075848694397} {:x 55, :y -16.889075848694397} {:x 56, :y -16.937250856215442} {:x 57, :y -16.937250856215442} {:x 58, :y -16.937250856215442} {:x 59, :y -16.94372579065236} {:x 60, :y -16.94372579065236} {:x 61, :y -16.94372579065236} {:x 62, :y -16.94372579065236} {:x 63, :y -16.94372579065236} {:x 64, :y -16.953336173745946} {:x 65, :y -16.953336173745946} {:x 66, :y -16.953336173745946} {:x 67, :y -16.953336173745946} {:x 68, :y -16.953336173745946} {:x 69, :y -16.953336173745946} {:x 70, :y -16.953336173745946} {:x 71, :y -16.953336173745946} {:x 72, :y -16.953336173745946} {:x 73, :y -16.953336173745946} {:x 74, :y -16.978477485827618} {:x 75, :y -16.978477485827618} {:x 76, :y -16.978477485827618} {:x 77, :y -16.978477485827618} {:x 78, :y -16.978477485827618} {:x 79, :y -16.978477485827618} {:x 80, :y -17.174870419942696} {:x 81, :y -17.174870419942696} {:x 82, :y -17.349291310905457} {:x 83, :y -17.349291310905457} {:x 84, :y -17.349291310905457} {:x 85, :y -17.349291310905457} {:x 86, :y -17.349291310905457} {:x 87, :y -17.349291310905457} {:x 88, :y -17.349291310905457} {:x 89, :y -17.349291310905457} {:x 90, :y -17.349291310905457} {:x 91, :y -17.349291310905457} {:x 92, :y -17.349291310905457} {:x 93, :y -17.349291310905457} {:x 94, :y -17.349291310905457} {:x 95, :y -17.349291310905457} {:x 96, :y -17.349291310905457} {:x 97, :y -17.349291310905457} {:x 98, :y -17.349291310905457} {:x 99, :y -17.349291310905457})}], :width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}}}"}
;; <=

;; **
;;; Examine the pareto front.
;; **

;; @@
(rutil/pareto-plot-population [:complexity :error] result)
;; @@
;; =>
;;; {"type":"vega","content":{"width":400,"height":247.2187957763672,"padding":{"bottom":20,"top":10,"right":10,"left":50},"scales":[{"name":"x","type":"linear","range":"width","zero":false,"domain":{"data":"116a1ce6-0bba-494c-ab66-9d10e5a354d6","field":"data.x"}},{"name":"y","type":"linear","range":"height","nice":true,"zero":false,"domain":{"data":"116a1ce6-0bba-494c-ab66-9d10e5a354d6","field":"data.y"}}],"axes":[{"scale":"x","type":"x"},{"scale":"y","type":"y"}],"data":[{"name":"116a1ce6-0bba-494c-ab66-9d10e5a354d6","values":[{"x":43.0,"y":-16.18241559782605},{"x":7.0,"y":-1.0063172196761803},{"x":9.0,"y":-1.7119443856500371},{"x":1.0,"y":4.094658114269642},{"x":5.0,"y":-0.6133298999285349},{"x":3.0,"y":0.8157391360875272},{"x":35.0,"y":-12.392477864684732},{"x":31.0,"y":-10.275834781786335},{"x":23.0,"y":-6.049943492921718},{"x":41.0,"y":-15.345066993356237},{"x":33.0,"y":-11.08172509823273},{"x":21.0,"y":-5.230490987609135},{"x":27.0,"y":-8.15979947586231},{"x":29.0,"y":-8.982095899257756},{"x":39.0,"y":-14.469255039379881},{"x":37.0,"y":-13.240033541457137},{"x":25.0,"y":-7.021897559927228},{"x":19.0,"y":-4.246715003051351},{"x":11.0,"y":-1.9900173554155636},{"x":13.0,"y":-2.7209117533229192},{"x":17.0,"y":-3.5580215244891917},{"x":49.0,"y":-17.349291310905457},{"x":15.0,"y":-2.799591919587743},{"x":47.0,"y":-16.889863347281914},{"x":45.0,"y":-16.685574980170063},{"x":43.0,"y":-15.712231926944677},{"x":41.0,"y":-14.745666153105295},{"x":49.0,"y":-17.174870419942696},{"x":23.0,"y":-5.9277235264734545},{"x":25.0,"y":-7.021897559927227},{"x":11.0,"y":-1.8914633055686896},{"x":29.0,"y":-8.913244867314067},{"x":45.0,"y":-16.615151736707112},{"x":19.0,"y":-4.24671500305135},{"x":49.0,"y":-17.09496326566378},{"x":31.0,"y":-9.773813161252162},{"x":23.0,"y":-5.855131952490974},{"x":45.0,"y":-16.347264142226603},{"x":17.0,"y":-3.2269548638858647},{"x":49.0,"y":-16.93673008849113},{"x":43.0,"y":-15.32962047926304},{"x":37.0,"y":-13.212748279518499},{"x":49.0,"y":-16.923807387891095},{"x":25.0,"y":-6.886458962439279},{"x":13.0,"y":-2.1870141086045876},{"x":35.0,"y":-11.769292669743619},{"x":25.0,"y":-6.501841537281089},{"x":19.0,"y":-4.184844105421847},{"x":47.0,"y":-16.86668142796892},{"x":33.0,"y":-10.73640257510053}]},{"name":"ce2cb682-1ae1-4558-b460-82d1c2eb650a","values":[{"x":13.0,"y":-2.7209117533229192},{"x":19.0,"y":5.066289857623916},{"x":13.0,"y":0.1325978311046621},{"x":23.0,"y":7.964600819382997},{"x":3.0,"y":41.9510262921234},{"x":25.0,"y":0.3074268749177786},{"x":7.0,"y":13.540097162703224},{"x":7.0,"y":9.7488810571426},{"x":1.0,"y":5.651727895409195},{"x":33.0,"y":-2.6028811256529427},{"x":43.0,"y":-11.069576477748605},{"x":5.0,"y":9.353113300602084},{"x":39.0,"y":-14.469255039379881},{"x":17.0,"y":-2.8279840032998456},{"x":15.0,"y":-2.783177276304623},{"x":3.0,"y":4.23169231743593},{"x":45.0,"y":-16.615151736707112},{"x":13.0,"y":-2.720911753322919},{"x":9.0,"y":-0.5709246125168296},{"x":37.0,"y":-12.198592088480037},{"x":17.0,"y":-2.8752141111150222},{"x":41.0,"y":-14.734683896223261},{"x":39.0,"y":-13.344622540320914},{"x":27.0,"y":-8.15979947586231},{"x":31.0,"y":-6.406539547144793},{"x":3.0,"y":9.1820609404566},{"x":3.0,"y":9.1820609404566},{"x":47.0,"y":-10.8791946775455},{"x":39.0,"y":-13.993154128971591},{"x":7.0,"y":-0.6377026648058338},{"x":39.0,"y":-14.469255039379881},{"x":1.0,"y":5.645981111917008},{"x":11.0,"y":-1.3591503558650924},{"x":13.0,"y":-2.0114654731335544},{"x":23.0,"y":-6.049943492921718},{"x":27.0,"y":-8.15979947586231},{"x":9.0,"y":-1.7119443856500371},{"x":41.0,"y":-15.345066993356237},{"x":35.0,"y":-12.392477864684732},{"x":7.0,"y":7.4546000705653785},{"x":45.0,"y":-16.11389801992621},{"x":19.0,"y":-3.9953564914367634},{"x":45.0,"y":-16.615151736707112},{"x":3.0,"y":4.23169231743593},{"x":35.0,"y":-11.769292669743619},{"x":13.0,"y":-1.6364638959421045},{"x":45.0,"y":-16.347264142226603},{"x":5.0,"y":3.1219969366388978},{"x":15.0,"y":-2.1268680320928492},{"x":13.0,"y":-1.702379734451669},{"x":17.0,"y":-2.8752141111150222},{"x":19.0,"y":-4.246715003051351},{"x":17.0,"y":-3.2269548638858647},{"x":9.0,"y":-0.3908910402844684},{"x":7.0,"y":-1.0063172196761803},{"x":13.0,"y":-2.0199908118853758},{"x":11.0,"y":-1.8914633055686896},{"x":3.0,"y":0.8157391360875272},{"x":9.0,"y":0.3531668476719795},{"x":11.0,"y":-1.0208952381791447},{"x":13.0,"y":-2.0199908118853758},{"x":5.0,"y":3.1219969366388978},{"x":29.0,"y":-6.0936896931638165},{"x":3.0,"y":41.62155018463667},{"x":33.0,"y":-11.08172509823273},{"x":5.0,"y":3.1219969366388978},{"x":49.0,"y":-16.892939529731784},{"x":19.0,"y":-3.684708174624864},{"x":21.0,"y":-2.5145694334672615},{"x":21.0,"y":-4.973301212577732},{"x":41.0,"y":-15.289677239448725},{"x":9.0,"y":-1.7119443856500371},{"x":35.0,"y":-12.392477864684732},{"x":15.0,"y":-2.6119392552444385},{"x":11.0,"y":-1.3591503558650924},{"x":43.0,"y":-16.18241559782605},{"x":37.0,"y":-10.400648061805999},{"x":27.0,"y":-6.414005212929396},{"x":7.0,"y":-1.0063172196761803},{"x":45.0,"y":-16.347264142226603},{"x":29.0,"y":-8.729425817432173},{"x":25.0,"y":-5.6322483341627665},{"x":25.0,"y":-6.891929037798598},{"x":39.0,"y":-14.083020892238485},{"x":17.0,"y":-2.548456826997093},{"x":29.0,"y":-6.033498810815893},{"x":49.0,"y":-17.174870419942696},{"x":17.0,"y":-2.0773431792390054},{"x":1.0,"y":42.189569773328394},{"x":49.0,"y":-10.97332480553846},{"x":29.0,"y":-8.913244867314067},{"x":39.0,"y":-13.99315412897159},{"x":11.0,"y":-1.5040988453072859},{"x":19.0,"y":-1.5417269756950138},{"x":9.0,"y":-1.7119443856500371},{"x":41.0,"y":-14.745666153105295},{"x":27.0,"y":-7.351411992126857},{"x":21.0,"y":-4.851100055786604},{"x":39.0,"y":-14.469255039379881},{"x":17.0,"y":-2.6736774099148133}]},{"name":"cab393ac-63bd-4092-8427-26380a28bf53","values":[{"x":43.0,"y":-16.18241559782605},{"x":7.0,"y":-1.0063172196761803},{"x":9.0,"y":-1.7119443856500371},{"x":1.0,"y":4.094658114269642},{"x":5.0,"y":-0.6133298999285349},{"x":3.0,"y":0.8157391360875272},{"x":35.0,"y":-12.392477864684732},{"x":31.0,"y":-10.275834781786335},{"x":23.0,"y":-6.049943492921718},{"x":41.0,"y":-15.345066993356237},{"x":33.0,"y":-11.08172509823273},{"x":21.0,"y":-5.230490987609135},{"x":27.0,"y":-8.15979947586231},{"x":29.0,"y":-8.982095899257756},{"x":39.0,"y":-14.469255039379881},{"x":37.0,"y":-13.240033541457137},{"x":25.0,"y":-7.021897559927228},{"x":19.0,"y":-4.246715003051351},{"x":11.0,"y":-1.9900173554155636},{"x":13.0,"y":-2.7209117533229192},{"x":17.0,"y":-3.5580215244891917},{"x":49.0,"y":-17.349291310905457},{"x":15.0,"y":-2.799591919587743},{"x":47.0,"y":-16.889863347281914},{"x":45.0,"y":-16.685574980170063}]}],"marks":[{"type":"symbol","from":{"data":"116a1ce6-0bba-494c-ab66-9d10e5a354d6"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"red"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"ce2cb682-1ae1-4558-b460-82d1c2eb650a"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"blue"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}},{"type":"symbol","from":{"data":"cab393ac-63bd-4092-8427-26380a28bf53"},"properties":{"enter":{"x":{"scale":"x","field":"data.x"},"y":{"scale":"y","field":"data.y"},"fill":{"value":"#ff29d2"},"fillOpacity":{"value":1}},"update":{"shape":"circle","size":{"value":70},"stroke":{"value":"transparent"}},"hover":{"size":{"value":210},"stroke":{"value":"white"}}}}]},"value":"#gorilla_repl.vega.VegaView{:content {:width 400, :height 247.2188, :padding {:bottom 20, :top 10, :right 10, :left 50}, :scales [{:name \"x\", :type \"linear\", :range \"width\", :zero false, :domain {:data \"116a1ce6-0bba-494c-ab66-9d10e5a354d6\", :field \"data.x\"}} {:name \"y\", :type \"linear\", :range \"height\", :nice true, :zero false, :domain {:data \"116a1ce6-0bba-494c-ab66-9d10e5a354d6\", :field \"data.y\"}}], :axes [{:scale \"x\", :type \"x\"} {:scale \"y\", :type \"y\"}], :data ({:name \"116a1ce6-0bba-494c-ab66-9d10e5a354d6\", :values ({:x 43.0, :y -16.18241559782605} {:x 7.0, :y -1.0063172196761803} {:x 9.0, :y -1.7119443856500371} {:x 1.0, :y 4.094658114269642} {:x 5.0, :y -0.6133298999285349} {:x 3.0, :y 0.8157391360875272} {:x 35.0, :y -12.392477864684732} {:x 31.0, :y -10.275834781786335} {:x 23.0, :y -6.049943492921718} {:x 41.0, :y -15.345066993356237} {:x 33.0, :y -11.08172509823273} {:x 21.0, :y -5.230490987609135} {:x 27.0, :y -8.15979947586231} {:x 29.0, :y -8.982095899257756} {:x 39.0, :y -14.469255039379881} {:x 37.0, :y -13.240033541457137} {:x 25.0, :y -7.021897559927228} {:x 19.0, :y -4.246715003051351} {:x 11.0, :y -1.9900173554155636} {:x 13.0, :y -2.7209117533229192} {:x 17.0, :y -3.5580215244891917} {:x 49.0, :y -17.349291310905457} {:x 15.0, :y -2.799591919587743} {:x 47.0, :y -16.889863347281914} {:x 45.0, :y -16.685574980170063} {:x 43.0, :y -15.712231926944677} {:x 41.0, :y -14.745666153105295} {:x 49.0, :y -17.174870419942696} {:x 23.0, :y -5.9277235264734545} {:x 25.0, :y -7.021897559927227} {:x 11.0, :y -1.8914633055686896} {:x 29.0, :y -8.913244867314067} {:x 45.0, :y -16.615151736707112} {:x 19.0, :y -4.24671500305135} {:x 49.0, :y -17.09496326566378} {:x 31.0, :y -9.773813161252162} {:x 23.0, :y -5.855131952490974} {:x 45.0, :y -16.347264142226603} {:x 17.0, :y -3.2269548638858647} {:x 49.0, :y -16.93673008849113} {:x 43.0, :y -15.32962047926304} {:x 37.0, :y -13.212748279518499} {:x 49.0, :y -16.923807387891095} {:x 25.0, :y -6.886458962439279} {:x 13.0, :y -2.1870141086045876} {:x 35.0, :y -11.769292669743619} {:x 25.0, :y -6.501841537281089} {:x 19.0, :y -4.184844105421847} {:x 47.0, :y -16.86668142796892} {:x 33.0, :y -10.73640257510053})} {:name \"ce2cb682-1ae1-4558-b460-82d1c2eb650a\", :values ({:x 13.0, :y -2.7209117533229192} {:x 19.0, :y 5.066289857623916} {:x 13.0, :y 0.1325978311046621} {:x 23.0, :y 7.964600819382997} {:x 3.0, :y 41.9510262921234} {:x 25.0, :y 0.3074268749177786} {:x 7.0, :y 13.540097162703224} {:x 7.0, :y 9.7488810571426} {:x 1.0, :y 5.651727895409195} {:x 33.0, :y -2.6028811256529427} {:x 43.0, :y -11.069576477748605} {:x 5.0, :y 9.353113300602084} {:x 39.0, :y -14.469255039379881} {:x 17.0, :y -2.8279840032998456} {:x 15.0, :y -2.783177276304623} {:x 3.0, :y 4.23169231743593} {:x 45.0, :y -16.615151736707112} {:x 13.0, :y -2.720911753322919} {:x 9.0, :y -0.5709246125168296} {:x 37.0, :y -12.198592088480037} {:x 17.0, :y -2.8752141111150222} {:x 41.0, :y -14.734683896223261} {:x 39.0, :y -13.344622540320914} {:x 27.0, :y -8.15979947586231} {:x 31.0, :y -6.406539547144793} {:x 3.0, :y 9.1820609404566} {:x 3.0, :y 9.1820609404566} {:x 47.0, :y -10.8791946775455} {:x 39.0, :y -13.993154128971591} {:x 7.0, :y -0.6377026648058338} {:x 39.0, :y -14.469255039379881} {:x 1.0, :y 5.645981111917008} {:x 11.0, :y -1.3591503558650924} {:x 13.0, :y -2.0114654731335544} {:x 23.0, :y -6.049943492921718} {:x 27.0, :y -8.15979947586231} {:x 9.0, :y -1.7119443856500371} {:x 41.0, :y -15.345066993356237} {:x 35.0, :y -12.392477864684732} {:x 7.0, :y 7.4546000705653785} {:x 45.0, :y -16.11389801992621} {:x 19.0, :y -3.9953564914367634} {:x 45.0, :y -16.615151736707112} {:x 3.0, :y 4.23169231743593} {:x 35.0, :y -11.769292669743619} {:x 13.0, :y -1.6364638959421045} {:x 45.0, :y -16.347264142226603} {:x 5.0, :y 3.1219969366388978} {:x 15.0, :y -2.1268680320928492} {:x 13.0, :y -1.702379734451669} {:x 17.0, :y -2.8752141111150222} {:x 19.0, :y -4.246715003051351} {:x 17.0, :y -3.2269548638858647} {:x 9.0, :y -0.3908910402844684} {:x 7.0, :y -1.0063172196761803} {:x 13.0, :y -2.0199908118853758} {:x 11.0, :y -1.8914633055686896} {:x 3.0, :y 0.8157391360875272} {:x 9.0, :y 0.3531668476719795} {:x 11.0, :y -1.0208952381791447} {:x 13.0, :y -2.0199908118853758} {:x 5.0, :y 3.1219969366388978} {:x 29.0, :y -6.0936896931638165} {:x 3.0, :y 41.62155018463667} {:x 33.0, :y -11.08172509823273} {:x 5.0, :y 3.1219969366388978} {:x 49.0, :y -16.892939529731784} {:x 19.0, :y -3.684708174624864} {:x 21.0, :y -2.5145694334672615} {:x 21.0, :y -4.973301212577732} {:x 41.0, :y -15.289677239448725} {:x 9.0, :y -1.7119443856500371} {:x 35.0, :y -12.392477864684732} {:x 15.0, :y -2.6119392552444385} {:x 11.0, :y -1.3591503558650924} {:x 43.0, :y -16.18241559782605} {:x 37.0, :y -10.400648061805999} {:x 27.0, :y -6.414005212929396} {:x 7.0, :y -1.0063172196761803} {:x 45.0, :y -16.347264142226603} {:x 29.0, :y -8.729425817432173} {:x 25.0, :y -5.6322483341627665} {:x 25.0, :y -6.891929037798598} {:x 39.0, :y -14.083020892238485} {:x 17.0, :y -2.548456826997093} {:x 29.0, :y -6.033498810815893} {:x 49.0, :y -17.174870419942696} {:x 17.0, :y -2.0773431792390054} {:x 1.0, :y 42.189569773328394} {:x 49.0, :y -10.97332480553846} {:x 29.0, :y -8.913244867314067} {:x 39.0, :y -13.99315412897159} {:x 11.0, :y -1.5040988453072859} {:x 19.0, :y -1.5417269756950138} {:x 9.0, :y -1.7119443856500371} {:x 41.0, :y -14.745666153105295} {:x 27.0, :y -7.351411992126857} {:x 21.0, :y -4.851100055786604} {:x 39.0, :y -14.469255039379881} {:x 17.0, :y -2.6736774099148133})} {:name \"cab393ac-63bd-4092-8427-26380a28bf53\", :values ({:x 43.0, :y -16.18241559782605} {:x 7.0, :y -1.0063172196761803} {:x 9.0, :y -1.7119443856500371} {:x 1.0, :y 4.094658114269642} {:x 5.0, :y -0.6133298999285349} {:x 3.0, :y 0.8157391360875272} {:x 35.0, :y -12.392477864684732} {:x 31.0, :y -10.275834781786335} {:x 23.0, :y -6.049943492921718} {:x 41.0, :y -15.345066993356237} {:x 33.0, :y -11.08172509823273} {:x 21.0, :y -5.230490987609135} {:x 27.0, :y -8.15979947586231} {:x 29.0, :y -8.982095899257756} {:x 39.0, :y -14.469255039379881} {:x 37.0, :y -13.240033541457137} {:x 25.0, :y -7.021897559927228} {:x 19.0, :y -4.246715003051351} {:x 11.0, :y -1.9900173554155636} {:x 13.0, :y -2.7209117533229192} {:x 17.0, :y -3.5580215244891917} {:x 49.0, :y -17.349291310905457} {:x 15.0, :y -2.799591919587743} {:x 47.0, :y -16.889863347281914} {:x 45.0, :y -16.685574980170063})}), :marks ({:type \"symbol\", :from {:data \"116a1ce6-0bba-494c-ab66-9d10e5a354d6\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"red\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"ce2cb682-1ae1-4558-b460-82d1c2eb650a\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"blue\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}} {:type \"symbol\", :from {:data \"cab393ac-63bd-4092-8427-26380a28bf53\"}, :properties {:enter {:x {:scale \"x\", :field \"data.x\"}, :y {:scale \"y\", :field \"data.y\"}, :fill {:value \"#ff29d2\"}, :fillOpacity {:value 1}}, :update {:shape \"circle\", :size {:value 70}, :stroke {:value \"transparent\"}}, :hover {:size {:value 210}, :stroke {:value \"white\"}}}})}}"}
;; <=

;; **
;;; Inspect an element of the pareto front. We are interested in the simplest expression with a low error.
;; **

;; @@
(def n 28)
(def r (nth (map :genotype (sort-by :complexity (:elite result))) n))
(tree/count-nodes r)
(def rr (grammar-replace r))
(tree/count-nodes rr)

(lagrangian/lagrange-score-mmd
  (lagrangian/prepare-lagrange-mmd-data dat t-step '[theta1 theta1])
  t-step '[theta1 theta2] '[omega1 omega2] rr)

(render/mathematician-view rr)

(mma/fullform rr)

rr
;; @@
;; =>
;;; {"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cos</span>","value":":cos"},{"type":"html","content":"<span class='clj-symbol'>omega1</span>","value":"omega1"}],"value":"[:cos omega1]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:cos</span>","value":":cos"},{"type":"html","content":"<span class='clj-symbol'>omega2</span>","value":"omega2"}],"value":"[:cos omega2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times theta2 theta2] [:times theta1 theta1]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"},{"type":"html","content":"<span class='clj-symbol'>theta2</span>","value":"theta2"}],"value":"[:times theta2 theta2]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:minus</span>","value":":minus"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:sin</span>","value":":sin"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:sin theta1]"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:minus [:sin theta1] theta1]"}],"value":"[:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]"}],"value":"[:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]"}],"value":"[:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]"}],"value":"[:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]"}],"value":"[:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]"}],"value":"[:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]"}],"value":"[:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]"}],"value":"[:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]"},{"type":"list-like","open":"<span class='clj-vector'>[</span>","close":"<span class='clj-vector'>]</span>","separator":" ","items":[{"type":"html","content":"<span class='clj-keyword'>:times</span>","value":":times"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"},{"type":"html","content":"<span class='clj-symbol'>theta1</span>","value":"theta1"}],"value":"[:times theta1 theta1]"}],"value":"[:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]] [:times theta1 theta1]]"}],"value":"[:times [:cos omega1] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:cos omega2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times [:times [:times theta2 theta2] [:times theta1 theta1]] [:times [:times theta2 theta2] [:minus [:sin theta1] theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]]] [:times theta1 theta1]]] [:times theta1 theta1]]] [:times theta1 theta1]]]"}
;; <=

;; @@

;; @@
